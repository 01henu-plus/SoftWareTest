# 用户登录/注册模块 SQA 检查表

## 一、设计阶段检查表（Design Phase Checklist）

### 1. 需求完整性检查
- [ ] 是否明确定义了所有登录方式（用户名/邮箱/手机号登录）
- [ ] 是否明确定义了注册所需的必填字段和可选字段
- [ ] 是否定义了密码强度要求（长度、复杂度、特殊字符等）
- [ ] 是否包含找回密码/重置密码的功能需求
- [ ] 是否定义了会话管理和超时机制

### 2. 安全性设计检查
- [ ] 密码是否采用加密存储（如bcrypt、PBKDF2等安全哈希算法）
- [ ] 是否设计了防暴力破解机制（如登录失败次数限制、验证码、账户锁定）
- [ ] 是否设计了防SQL注入和XSS攻击的措施
- [ ] 是否使用HTTPS协议传输敏感信息
- [ ] 是否设计了Token或Session的安全管理机制
- [ ] 是否包含双因素认证（2FA）或多因素认证的设计

### 3. 用户体验设计检查
- [ ] 错误提示信息是否清晰且不泄露敏感信息（如"用户名或密码错误"而非"用户名不存在"）
- [ ] 是否设计了友好的表单验证提示（实时验证反馈）
- [ ] 是否支持"记住我"功能及其安全实现方式
- [ ] 是否设计了合理的页面跳转逻辑（登录后跳转、未登录拦截等）
- [ ] 是否考虑了移动端和PC端的适配

### 4. 数据验证设计检查
- [ ] 是否定义了所有输入字段的格式验证规则（邮箱、手机号、用户名格式等）
- [ ] 是否设计了前端和后端双重数据验证机制
- [ ] 是否定义了用户名/邮箱/手机号的唯一性检查逻辑
- [ ] 是否设计了防止重复注册的机制
- [ ] 是否定义了特殊字符和敏感词过滤规则

### 5. 异常处理设计检查
- [ ] 是否设计了网络异常时的处理逻辑
- [ ] 是否定义了数据库操作失败时的回滚机制
- [ ] 是否设计了并发注册的处理策略
- [ ] 是否包含日志记录机制（登录失败、异常操作等）
- [ ] 是否设计了系统维护时的友好提示

### 6. 性能和可扩展性检查
- [ ] 数据库表结构设计是否合理（索引、分区等）
- [ ] 是否考虑了高并发场景下的性能优化（缓存、负载均衡等）
- [ ] 是否设计了用户信息的合理存储结构
- [ ] 接口设计是否符合RESTful规范或GraphQL标准
- [ ] 是否预留了第三方登录（OAuth）的扩展接口

### 7. 合规性检查
- [ ] 是否符合GDPR、个人信息保护法等数据隐私法规
- [ ] 是否包含用户协议和隐私政策的展示及同意机制
- [ ] 是否设计了用户数据导出和删除功能
- [ ] 是否符合行业安全标准（如OWASP Top 10）

---

## 二、编码阶段检查表（Coding Phase Checklist）

### 1. 代码安全性检查
- [ ] 密码是否正确使用加密算法存储（禁止明文或MD5）
- [ ] 是否正确实现了参数化查询，防止SQL注入
- [ ] 用户输入是否进行了转义处理，防止XSS攻击
- [ ] 敏感信息（密码、Token等）是否避免在日志中输出
- [ ] 是否正确实现了CSRF防护机制
- [ ] Session/Token是否设置了HttpOnly和Secure标志

### 2. 输入验证实现检查
- [ ] 前端是否实现了实时表单验证
- [ ] 后端是否对所有输入进行了严格验证（不信任前端验证）
- [ ] 邮箱、手机号格式验证是否使用正确的正则表达式
- [ ] 密码强度验证是否符合设计要求
- [ ] 是否检查了用户名/邮箱的唯一性（数据库级别）
- [ ] 是否限制了字段长度，防止缓冲区溢出

### 3. 业务逻辑实现检查
- [ ] 登录失败次数限制是否正确实现（包括计数重置逻辑）
- [ ] 验证码生成和校验逻辑是否正确（区分大小写、过期时间等）
- [ ] Token/Session的生成、验证和销毁是否正确实现
- [ ] 找回密码功能是否安全（验证码有效期、重置链接唯一性等）
- [ ] 注册邮件/短信验证流程是否完整
- [ ] 并发注册时是否正确处理了数据竞争问题

### 4. 错误处理和日志检查
- [ ] 是否捕获并妥善处理了所有可能的异常
- [ ] 错误信息是否返回统一格式的响应
- [ ] 是否记录了关键操作日志（登录成功/失败、注册、密码修改等）
- [ ] 日志是否包含足够的调试信息（时间戳、用户ID、IP地址等）
- [ ] 是否避免在错误信息中暴露系统内部信息
- [ ] 数据库操作失败是否有适当的回滚处理

### 5. 代码质量检查
- [ ] 代码是否遵循项目的编码规范
- [ ] 是否有适当的代码注释（特别是复杂逻辑部分）
- [ ] 函数和方法是否遵循单一职责原则
- [ ] 是否避免了代码重复（DRY原则）
- [ ] 是否正确使用了设计模式（如工厂模式、策略模式等）
- [ ] 敏感信息（数据库密码、API密钥等）是否使用配置文件或环境变量管理

### 6. 性能优化检查
- [ ] 数据库查询是否使用了合适的索引
- [ ] 是否避免了N+1查询问题
- [ ] 是否实现了合理的缓存机制（如Redis缓存用户会话）
- [ ] 是否对频繁访问的数据进行了优化
- [ ] 接口响应时间是否在可接受范围内（如登录<500ms）

### 7. 单元测试和集成测试检查
- [ ] 是否为核心业务逻辑编写了单元测试
- [ ] 测试用例是否覆盖了正常场景和异常场景
- [ ] 是否测试了边界条件（如最长用户名、特殊字符等）
- [ ] 是否编写了接口集成测试
- [ ] 测试代码覆盖率是否达到要求（建议>80%）
- [ ] 是否使用了Mock来隔离外部依赖

### 8. 依赖和配置检查
- [ ] 是否使用了最新稳定版本的依赖库
- [ ] 依赖库是否存在已知的安全漏洞（使用工具扫描）
- [ ] 配置文件中敏感信息是否正确加密或隔离
- [ ] 是否区分了开发、测试、生产环境的配置

---

## 检查表使用说明

1. **检查频率**：设计阶段在设计评审会议前完成；编码阶段在代码提交前和Code Review时使用
2. **责任人**：设计阶段由架构师和开发Lead负责；编码阶段由开发人员和Code Reviewer共同负责
3. **记录要求**：每个检查项标记为通过(✓)、不通过(✗)或不适用(N/A)，不通过项需记录问题和整改措施
4. **持续改进**：根据实际发现的问题不断更新和完善检查表

---

**创建日期**：2025年11月14日  
**版本**：v1.0  
**适用模块**：用户登录/注册模块
