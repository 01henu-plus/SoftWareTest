# 课堂作业完成总结

## 📋 已创建的文件

### 核心文件
1. **app.py** - Flask 订单系统 API 服务
   - 实现了订单下单功能
   - 包含库存管理逻辑
   - 提供错误处理（商品不存在、库存不足）

2. **test_integration.py** - 集成测试文件
   - 使用 requests 库进行 API 测试
   - 包含 3 个测试用例
   - 可以用 pytest 运行

3. **manual_test.py** - 手动测试脚本
   - 提供详细的测试输出
   - 适合演示和学习

### 辅助文件
4. **test.http** - REST Client 测试文件
   - 在 VS Code 中直接测试 API
   - 无需安装 Postman

5. **run_test.ps1** - PowerShell 启动脚本
   - 自动检查服务状态
   - 快速运行测试

6. **README.md** - 完整文档
   - 详细的使用说明
   - 故障排查指南
   - 练习建议

7. **课堂作业.py** - 项目说明
   - 美化的中文文档
   - 快速参考指南

## 🚀 运行方法

### 方法 1: 标准流程（推荐）
```powershell
# 终端 1 - 启动服务
python app.py

# 终端 2 - 运行测试
python manual_test.py
```

### 方法 2: 使用 pytest
```powershell
# 终端 1 - 启动服务
python app.py

# 终端 2 - pytest 测试
pytest test_integration.py -v
```

### 方法 3: 使用 REST Client
1. 打开 `test.http`
2. 点击 "Send Request"
3. 查看响应

### 方法 4: 使用 PowerShell 脚本
```powershell
# 确保服务已在另一终端运行
.\run_test.ps1
```

## ✅ 测试覆盖

- ✓ 正常下单流程
- ✓ 不存在的商品
- ✓ 库存不足

## 🎯 课堂练习

### 练习 1: 接口参数错误
修改 `app.py` 第 11 行：
```python
# 原代码
item = request.json.get("item")

# 修改为
item = request.json.get("product")
```
重启服务，运行测试，观察结果。

### 练习 2: 添加新测试
在 `test_integration.py` 中添加：
- 数量为 0
- 数量为负数
- 缺少必填参数

### 练习 3: 扩展功能
添加新 API：
- `GET /inventory` - 查询库存
- `POST /refund` - 退货

## 📊 项目结构
```
第四章/
├── app.py                    # Flask 服务
├── test_integration.py       # pytest 测试
├── manual_test.py            # 手动测试
├── test.http                 # REST Client
├── run_test.ps1              # 启动脚本
├── README.md                 # 详细文档
├── 课堂作业.py               # 项目说明
└── 使用总结.md               # 本文件
```

## 🔧 依赖要求
- Python 3.x
- Flask
- requests
- pytest (可选)

## 💡 提示
1. Flask 服务必须先启动才能运行测试
2. 默认端口是 5000，如果被占用可以修改
3. 所有测试文件都可以独立运行
4. 查看 README.md 获取更多详细信息

## 🎓 学习要点
- 集成测试关注模块间的协作
- API 测试需要验证状态码和响应内容
- 接口契约的重要性
- 自动化测试的价值
