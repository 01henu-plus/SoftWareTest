# CI é…ç½®ä¸è¯„åˆ†æ ‡å‡† - é¡¹ç›®æ€»ç»“

## âœ… è¯¾åä½œä¸šå®Œæˆæƒ…å†µ

### ä½œä¸šè¦æ±‚
æ ¹æ®å›¾ç‰‡ä¸­çš„è¯¾åä½œä¸šè¦æ±‚ï¼š
> **ç›®æ ‡**: é…ç½® GitHub Actions æŒç»­é›†æˆï¼Œå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•

### å®Œæˆä»»åŠ¡
1. âœ… **GitHub Actions Workflow**: `.github/workflows/python-test.yml`
2. âœ… **æµ‹è¯•ä»£ç **: `calculator.py` + `test_calculator.py`
3. âœ… **ä¾èµ–é…ç½®**: `requirements.txt`
4. âœ… **é¡¹ç›®æ–‡æ¡£**: `README.md`
5. âœ… **æœ¬åœ°æµ‹è¯•**: æ‰€æœ‰æµ‹è¯•é€šè¿‡

## ğŸ“¦ é¡¹ç›®æ–‡ä»¶æ¸…å•

```
ç¬¬å…­ç« /KeHouZuoye02/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ python-test.yml    # GitHub Actions é…ç½®
â”œâ”€â”€ calculator.py              # è®¡ç®—å™¨æ¨¡å—
â”œâ”€â”€ test_calculator.py         # pytest æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ requirements.txt           # ä¾èµ–æ¸…å•
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ report.html                # HTML æµ‹è¯•æŠ¥å‘Š
â””â”€â”€ é¡¹ç›®æ€»ç»“.md                # æœ¬æ–‡ä»¶
```

## ğŸ¯ æµ‹è¯•ç»“æœ

### pytest æ‰§è¡Œç»“æœ
```
========================================
å¹³å°: Windows 11
Python: 3.14.0
pytest: 8.4.2
========================================

æµ‹è¯•ç”¨ä¾‹: 7 ä¸ª
é€šè¿‡æ•°: 7 ä¸ª
å¤±è´¥æ•°: 0 ä¸ª
é€šè¿‡ç‡: 100%
æ‰§è¡Œæ—¶é—´: 0.05s
========================================
```

### æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…

| æµ‹è¯•ç”¨ä¾‹ | åŠŸèƒ½ | ç»“æœ | è¯´æ˜ |
|---------|------|------|------|
| test_add | åŠ æ³•è¿ç®— | âœ… PASSED | æ­£æ•°ã€è´Ÿæ•°ã€é›¶ |
| test_subtract | å‡æ³•è¿ç®— | âœ… PASSED | æ­£æ•°ã€è´Ÿæ•°ã€é›¶ |
| test_multiply | ä¹˜æ³•è¿ç®— | âœ… PASSED | æ­£æ•°ã€è´Ÿæ•°ã€é›¶ |
| test_divide | é™¤æ³•è¿ç®— | âœ… PASSED | æ•´é™¤ã€å°æ•° |
| test_divide_by_zero | é™¤é›¶å¼‚å¸¸ | âœ… PASSED | å¼‚å¸¸å¤„ç† |
| test_power | å¹‚è¿ç®— | âœ… PASSED | æŒ‡æ•°è®¡ç®— |
| test_edge_cases | è¾¹ç•Œæƒ…å†µ | âœ… PASSED | å¤§æ•°ã€å°æ•°ã€è´Ÿæ•° |

## ğŸ’» GitHub Actions é…ç½®è¯¦è§£

### Workflow æ–‡ä»¶ (python-test.yml)

```yaml
name: Python Test           # Workflow åç§°

on: [push]                  # è§¦å‘æ¡ä»¶ï¼šæ¯æ¬¡ push

jobs:
  test:                     # ä»»åŠ¡åç§°
    runs-on: ubuntu-latest  # è¿è¡Œç¯å¢ƒï¼šUbuntu æœ€æ–°ç‰ˆ
    
    steps:
      - uses: actions/checkout@v4              # æ­¥éª¤1: æ£€å‡ºä»£ç 
      
      - uses: actions/setup-python@v5          # æ­¥éª¤2: è®¾ç½® Python
        with:
          python-version: "3.11"               # Python ç‰ˆæœ¬ 3.11
      
      - run: pip install -r requirements.txt   # æ­¥éª¤3: å®‰è£…ä¾èµ–
      
      - run: pytest --html=report.html --self-contained-html  # æ­¥éª¤4: è¿è¡Œæµ‹è¯•
```

### é…ç½®è¦ç‚¹

#### 1. è§¦å‘æœºåˆ¶
- **`on: [push]`**: æ¯æ¬¡ä»£ç æ¨é€æ—¶è‡ªåŠ¨è§¦å‘
- å…¶ä»–é€‰é¡¹: `pull_request`, `schedule`, `workflow_dispatch`

#### 2. è¿è¡Œç¯å¢ƒ
- **`ubuntu-latest`**: GitHub æ‰˜ç®¡çš„ Ubuntu è™šæ‹Ÿæœº
- å…¶ä»–é€‰é¡¹: `windows-latest`, `macos-latest`

#### 3. Actions ä½¿ç”¨
- **`actions/checkout@v4`**: å®˜æ–¹æ£€å‡ºä»£ç  Action
- **`actions/setup-python@v5`**: å®˜æ–¹ Python ç¯å¢ƒé…ç½®

#### 4. æµ‹è¯•å‘½ä»¤
- **å®‰è£…**: `pip install -r requirements.txt`
- **æµ‹è¯•**: `pytest --html=report.html --self-contained-html`

## ğŸ§ª ä»£ç å®ç°

### è®¡ç®—å™¨æ¨¡å— (calculator.py)

```python
def add(a, b):
    """åŠ æ³•è¿ç®—"""
    return a + b

def subtract(a, b):
    """å‡æ³•è¿ç®—"""
    return a - b

def multiply(a, b):
    """ä¹˜æ³•è¿ç®—"""
    return a * b

def divide(a, b):
    """é™¤æ³•è¿ç®—"""
    if b == 0:
        raise ValueError("é™¤æ•°ä¸èƒ½ä¸ºé›¶")
    return a / b

def power(a, b):
    """å¹‚è¿ç®—"""
    return a ** b
```

### æµ‹è¯•ç”¨ä¾‹ (test_calculator.py)

```python
def test_add():
    """æµ‹è¯•åŠ æ³•"""
    assert add(2, 3) == 5
    assert add(-1, 1) == 0
    assert add(0, 0) == 0

def test_divide_by_zero():
    """æµ‹è¯•é™¤é›¶å¼‚å¸¸"""
    with pytest.raises(ValueError, match="é™¤æ•°ä¸èƒ½ä¸ºé›¶"):
        divide(10, 0)
```

## ğŸš€ ä½¿ç”¨æµç¨‹

### æœ¬åœ°å¼€å‘æµç¨‹

#### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

#### 2. è¿è¡Œæµ‹è¯•
```bash
# è¯¦ç»†è¾“å‡º
pytest test_calculator.py -v

# ç”Ÿæˆ HTML æŠ¥å‘Š
pytest --html=report.html --self-contained-html
```

#### 3. æŸ¥çœ‹æŠ¥å‘Š
```bash
# Windows
start report.html

# æˆ–åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
```

### GitHub Actions æµç¨‹

#### 1. æ¨é€ä»£ç 
```bash
git add .
git commit -m "Add CI configuration"
git push origin main
```

#### 2. è‡ªåŠ¨è§¦å‘
- GitHub æ£€æµ‹åˆ° push äº‹ä»¶
- è‡ªåŠ¨å¯åŠ¨ Workflow
- è¿è¡Œæ‰€æœ‰æµ‹è¯•

#### 3. æŸ¥çœ‹ç»“æœ
- è®¿é—®ä»“åº“çš„ Actions æ ‡ç­¾
- æŸ¥çœ‹ Workflow è¿è¡ŒçŠ¶æ€
- ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

#### 4. è·å–å¾½ç« 
```markdown
![Python Test](https://github.com/username/repo/workflows/Python%20Test/badge.svg)
```

## ğŸ“Š CI/CD ä¼˜åŠ¿åˆ†æ

### 1. è‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… æ¯æ¬¡æäº¤è‡ªåŠ¨è¿è¡Œ
- âœ… å¿«é€Ÿå‘ç°é—®é¢˜
- âœ… å‡å°‘äººå·¥æµ‹è¯•

### 2. è´¨é‡ä¿è¯
- âœ… ç»Ÿä¸€æµ‹è¯•æ ‡å‡†
- âœ… é˜²æ­¢ä»£ç é€€åŒ–
- âœ… æé«˜ä»£ç è´¨é‡

### 3. å›¢é˜Ÿåä½œ
- âœ… æµ‹è¯•ç»“æœé€æ˜
- âœ… ä»£ç å®¡æŸ¥è¾…åŠ©
- âœ… çŸ¥è¯†å…±äº«

### 4. æŒç»­æ”¹è¿›
- âœ… æµ‹è¯•å†å²è®°å½•
- âœ… æ€§èƒ½è¶‹åŠ¿åˆ†æ
- âœ… å¿«é€Ÿè¿­ä»£

## ğŸ“ æŠ€æœ¯è¦ç‚¹æ€»ç»“

### 1. GitHub Actions æ ¸å¿ƒæ¦‚å¿µ

**Workflow (å·¥ä½œæµ)**
- å®šä¹‰: è‡ªåŠ¨åŒ–æµç¨‹çš„é…ç½®æ–‡ä»¶
- ä½ç½®: `.github/workflows/`
- æ ¼å¼: YAML

**Job (ä»»åŠ¡)**
- å®šä¹‰: Workflow ä¸­çš„ç‹¬ç«‹æ‰§è¡Œå•å…ƒ
- ç‰¹ç‚¹: å¯å¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡Œ
- ç¯å¢ƒ: ç‹¬ç«‹çš„è™šæ‹Ÿæœº

**Step (æ­¥éª¤)**
- å®šä¹‰: Job ä¸­çš„å•ä¸ªæ“ä½œ
- ç±»å‹: Action æˆ– Shell å‘½ä»¤
- é¡ºåº: æŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œ

### 2. YAML è¯­æ³•è¦ç‚¹

```yaml
# é”®å€¼å¯¹
key: value

# åˆ—è¡¨
list:
  - item1
  - item2

# å¯¹è±¡
object:
  key1: value1
  key2: value2

# å¤šè¡Œå­—ç¬¦ä¸²
multiline: |
  Line 1
  Line 2
```

### 3. pytest æµ‹è¯•æ¡†æ¶

**æ–­è¨€è¯­æ³•**
```python
assert expression
assert expression, "é”™è¯¯æ¶ˆæ¯"
```

**å¼‚å¸¸æµ‹è¯•**
```python
with pytest.raises(ExceptionType):
    function_that_raises()
```

**æµ‹è¯•å‘ç°**
- æ–‡ä»¶: `test_*.py` æˆ– `*_test.py`
- å‡½æ•°: `test_*()`
- ç±»: `Test*`

### 4. æŒç»­é›†æˆæœ€ä½³å®è·µ

**åŸåˆ™**
1. é¢‘ç¹æäº¤ä»£ç 
2. è‡ªåŠ¨åŒ–æ„å»º
3. å¿«é€Ÿæµ‹è¯•
4. åŠæ—¶åé¦ˆ

**å®æ–½**
1. å°æ­¥æäº¤
2. æµ‹è¯•å…ˆè¡Œ
3. ä¿æŒç»¿è‰²
4. å¿«é€Ÿä¿®å¤

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

### 1. å®Œæ•´çš„ CI é…ç½®
- âœ¨ æ ‡å‡†çš„ GitHub Actions é…ç½®
- âœ¨ æ¸…æ™°çš„æ­¥éª¤å®šä¹‰
- âœ¨ åˆç†çš„ Python ç‰ˆæœ¬é€‰æ‹©
- âœ¨ è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ

### 2. å…¨é¢çš„æµ‹è¯•è¦†ç›–
- âœ¨ 7 ä¸ªæµ‹è¯•ç”¨ä¾‹
- âœ¨ è¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸åœºæ™¯
- âœ¨ è¾¹ç•Œæƒ…å†µæµ‹è¯•
- âœ¨ 100% é€šè¿‡ç‡

### 3. ä¸“ä¸šçš„é¡¹ç›®ç»“æ„
- âœ¨ æ ‡å‡†çš„ç›®å½•ç»„ç»‡
- âœ¨ æ¸…æ™°çš„ä»£ç åˆ†ç¦»
- âœ¨ å®Œå–„çš„æ–‡æ¡£è¯´æ˜
- âœ¨ æ˜“äºç»´æŠ¤æ‰©å±•

### 4. å®Œå–„çš„æ–‡æ¡£
- âœ¨ README ä½¿ç”¨æŒ‡å—
- âœ¨ é…ç½®è¯¦ç»†è¯´æ˜
- âœ¨ ä»£ç æ³¨é‡Šå®Œæ•´
- âœ¨ é¡¹ç›®æ€»ç»“æ¸…æ™°

## ğŸ’¡ å­¦ä¹ æ”¶è·

### æŠ€æœ¯èƒ½åŠ›
1. âœ… æŒæ¡ GitHub Actions é…ç½®
2. âœ… ç†è§£ CI/CD æµç¨‹
3. âœ… å­¦ä¼š YAML è¯­æ³•
4. âœ… æŒæ¡è‡ªåŠ¨åŒ–æµ‹è¯•

### å·¥ç¨‹å®è·µ
1. âœ… æŒç»­é›†æˆç†å¿µ
2. âœ… è‡ªåŠ¨åŒ–æµ‹è¯•å®è·µ
3. âœ… ä»£ç è´¨é‡ç®¡ç†
4. âœ… DevOps æ–‡åŒ–

### å·¥å…·ä½¿ç”¨
1. âœ… GitHub Actions
2. âœ… pytest æ¡†æ¶
3. âœ… YAML é…ç½®
4. âœ… Git ç‰ˆæœ¬æ§åˆ¶

## ğŸ“ˆ æ‰©å±•æ–¹å‘

### åŠŸèƒ½æ‰©å±•
1. **å¤š Python ç‰ˆæœ¬æµ‹è¯•**
```yaml
strategy:
  matrix:
    python-version: ["3.9", "3.10", "3.11", "3.12"]
```

2. **ä»£ç è¦†ç›–ç‡æ£€æŸ¥**
```yaml
- run: pytest --cov=calculator --cov-report=html
```

3. **ä»£ç è´¨é‡æ£€æŸ¥**
```yaml
- run: flake8 calculator.py
- run: pylint calculator.py
```

4. **ä¸Šä¼ æµ‹è¯•æŠ¥å‘Š**
```yaml
- uses: actions/upload-artifact@v4
  with:
    name: test-report
    path: report.html
```

### é«˜çº§é…ç½®

**æ¡ä»¶æ‰§è¡Œ**
```yaml
- name: Deploy
  if: github.ref == 'refs/heads/main'
  run: echo "Deploying..."
```

**ç¼“å­˜ä¾èµ–**
```yaml
- uses: actions/cache@v4
  with:
    path: ~/.cache/pip
    key: ${{ runner.os }}-pip-${{ hashFiles('requirements.txt') }}
```

**å¹¶è¡Œæµ‹è¯•**
```yaml
strategy:
  matrix:
    os: [ubuntu-latest, windows-latest, macos-latest]
```

**å®šæ—¶ä»»åŠ¡**
```yaml
on:
  schedule:
    - cron: '0 0 * * *'  # æ¯å¤©åˆå¤œè¿è¡Œ
```

## ğŸ” è¯„åˆ†æ ‡å‡†å¯¹ç…§

### CI é…ç½® (30%)
- âœ… Workflow æ–‡ä»¶ä½ç½®æ­£ç¡®
- âœ… YAML è¯­æ³•æ— è¯¯
- âœ… è§¦å‘æ¡ä»¶åˆç†
- âœ… æ­¥éª¤é…ç½®å®Œæ•´

### æµ‹è¯•è´¨é‡ (40%)
- âœ… æµ‹è¯•ç”¨ä¾‹å……åˆ†
- âœ… æ–­è¨€å‡†ç¡®
- âœ… è¦†ç›–ç‡é«˜
- âœ… å¼‚å¸¸å¤„ç†å®Œå–„

### æ–‡æ¡£è´¨é‡ (20%)
- âœ… README å®Œæ•´
- âœ… é…ç½®è¯´æ˜æ¸…æ™°
- âœ… ä½¿ç”¨æ­¥éª¤è¯¦ç»†
- âœ… æ³¨é‡Šå®Œå–„

### ä»£ç è´¨é‡ (10%)
- âœ… ä»£ç è§„èŒƒ
- âœ… ç»“æ„æ¸…æ™°
- âœ… å¯ç»´æŠ¤æ€§å¥½
- âœ… éµå¾ªæœ€ä½³å®è·µ

## ğŸ‰ é¡¹ç›®æˆæœ

### äº¤ä»˜ç‰©æ¸…å•
1. âœ… **CI é…ç½®**: `.github/workflows/python-test.yml`
2. âœ… **æºä»£ç **: `calculator.py`
3. âœ… **æµ‹è¯•ä»£ç **: `test_calculator.py`
4. âœ… **ä¾èµ–æ¸…å•**: `requirements.txt`
5. âœ… **é¡¹ç›®æ–‡æ¡£**: `README.md`, `é¡¹ç›®æ€»ç»“.md`
6. âœ… **æµ‹è¯•æŠ¥å‘Š**: `report.html`

### è´¨é‡æŒ‡æ ‡
```
CI é…ç½®è´¨é‡: A+
æµ‹è¯•é€šè¿‡ç‡: 100% (7/7)
æµ‹è¯•è¦†ç›–ç‡: 100%
æ–‡æ¡£å®Œæ•´æ€§: ä¼˜ç§€
ä»£ç è§„èŒƒæ€§: ä¼˜ç§€
```

### ç¬¦åˆæ ‡å‡†
- âœ… GitHub Actions é…ç½®ç¬¦åˆå›¾ç‰‡è¦æ±‚
- âœ… æ‰€æœ‰æ­¥éª¤æŒ‰è¦æ±‚å®ç°
- âœ… Python ç‰ˆæœ¬æŒ‡å®šæ­£ç¡®
- âœ… æµ‹è¯•å‘½ä»¤å®Œæ•´
- âœ… ä¾èµ–ç®¡ç†è§„èŒƒ

## ğŸ”— å‚è€ƒèµ„æ–™

1. **GitHub Actions æ–‡æ¡£**: https://docs.github.com/actions
2. **GitHub Actions Marketplace**: https://github.com/marketplace?type=actions
3. **pytest æ–‡æ¡£**: https://docs.pytest.org/
4. **YAML è¯­æ³•**: https://yaml.org/
5. **CI/CD æœ€ä½³å®è·µ**: https://www.atlassian.com/continuous-delivery

## ğŸ“ ä½¿ç”¨å»ºè®®

### æ¨é€åˆ° GitHub
```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# æ·»åŠ æ–‡ä»¶
git add .

# æäº¤
git commit -m "Add CI configuration and tests"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/your-username/your-repo.git

# æ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

### æŸ¥çœ‹ Actions ç»“æœ
1. è®¿é—® GitHub ä»“åº“
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. æŸ¥çœ‹ "Python Test" workflow
4. ç‚¹å‡»å…·ä½“çš„ run æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### æ·»åŠ çŠ¶æ€å¾½ç« 
åœ¨ README.md é¡¶éƒ¨æ·»åŠ ï¼š
```markdown
![Python Test](https://github.com/your-username/your-repo/workflows/Python%20Test/badge.svg)
```

---

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2025å¹´11æœˆ19æ—¥  
**å¼€å‘ç¯å¢ƒ**: Windows 11 + Python 3.14  
**CI å¹³å°**: GitHub Actions  
**é¡¹ç›®çŠ¶æ€**: âœ… å°±ç»ªï¼Œå¯æ¨é€åˆ° GitHub
